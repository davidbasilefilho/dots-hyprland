$sidebar_chat_textboxareaColor: mix($onSurfaceVariant, $surfaceVariant, 40%);

@mixin group-padding {
  padding: 0.35rem;
}

// Modern sidebar containers with refined shadows and transitions
.sidebar-right {
  @include menu_decel;
  @include elevation-border;
  border-radius: $rounding_large - $elevation_margin + 0.07rem;
  min-width: 28rem;
  background-color: $background;
  padding: 1.05rem;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  transition: transform 0.3s cubic-bezier(0.05, 0.7, 0.1, 1), opacity 0.25s ease;
}

.sidebar-left {
  @include menu_decel;
  @include elevation-border;
  border-radius: $rounding_large - $elevation_margin + 0.07rem;
  min-width: 28rem;
  background-color: $background;
  padding: 1.05rem;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  transition: transform 0.3s cubic-bezier(0.05, 0.7, 0.1, 1), opacity 0.25s ease;
}

// Improved sidebar groups
.sidebar-group {
  @include normal-rounding;
  @include group-padding;
  background-color: $layer1;
  margin-bottom: 0.7rem;
}

.sidebar-group-nopad {
  @include normal-rounding;
  background-color: $layer1;
  margin-bottom: 0.7rem;
}

.sidebar-group-invisible {
  @include group-padding;
  margin-bottom: 0.5rem;
}

.sidebar-group-invisible-morehorizpad {
  padding: 0.35rem 0.7rem;
}

.sidebar-togglesbox {
  @include full-rounding;
  @include group-padding;
  background-color: $layer1;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

// Enhanced sidebar buttons with better feedback
.sidebar-iconbutton {
  @include full-rounding;
  @include element_decel;
  color: $onSurface;
  min-width: 2.75rem;
  min-height: 2.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
}

.sidebar-iconbutton:hover,
.sidebar-iconbutton:focus {
  background-color: $layer1Hover;
  transform: scale(1.05);
}

.sidebar-iconbutton:active {
  background-color: $layer1Active;
  transform: scale(0.95);
}

.sidebar-button-active {
  background-color: $primary;
  color: $onPrimary;
}

.sidebar-button-active:hover,
.sidebar-button-active:focus {
  background-color: mix($primary, $layer1Hover, 75%);
}

.sidebar-button-active:active {
  background-color: mix($primary, $layer1Active, 45%);
}

.sidebar-buttons-separator {
  min-width: 0.07rem;
  min-height: 0.07rem;
  background-color: $onSurfaceVariant;
  margin: 0.14rem 0;
}

// Navigation rail with improved spacing
.sidebar-navrail {
  padding: 0 $rounding_medium;
}

.sidebar-navrail-btn > box > label {
  @include full-rounding;
  @include menu_decel;
}

.sidebar-navrail-btn:hover > box > label:first-child,
.sidebar-navrail-btn:focus > box > label:first-child {
  background-color: $layer1Hover;
  transform: translateY(-2px);
}

.sidebar-navrail-btn:active > box > label:first-child {
  background-color: $layer1Active;
  transform: translateY(1px);
}

.sidebar-navrail-btn-active > box > label:first-child {
  background-color: $secondaryContainer;
  color: $onSecondaryContainer;
}

.sidebar-navrail-btn-active:hover > box > label:first-child,
.sidebar-navrail-btn-active:focus > box > label:first-child {
  background-color: mix($secondaryContainer, $layer1Hover, 92%);
  color: mix($onSecondaryContainer, $layer1Hover, 92%);
}

// System info group with improved spacing and visuals
.sidebar-sysinfo-grouppad {
  padding: 1.2rem;
}

// Enhanced memory indicators
.sidebar-memory-ram-circprog {
  @include fluent_decel_long;
  min-width: $rounding_small;
  min-height: 4.1rem;
  padding: 0.41rem;
  background-color: $secondaryContainer;
  color: $onSecondaryContainer;
  font-size: 0px;
}

.sidebar-memory-swap-circprog {
  @include fluent_decel_long;
  min-width: $rounding_small;
  min-height: 2.26rem;
  padding: 0.41rem;
  margin: 0.92rem;
  background-color: $secondaryContainer;
  color: $onSecondaryContainer;
  font-size: 0px;
}

.sidebar-cpu-circprog {
  min-width: $rounding_small;
  min-height: 3.41rem;
  padding: 0.41rem;
  background-color: $secondaryContainer;
  color: $onSecondaryContainer;
  @include fluent_decel_long;
  font-size: 0px;
}

// Modern scrollbar styling
.sidebar-scrollbar {
  trough {
    @include full-rounding;
    min-width: 0.55rem;
    background-color: transparent;
  }

  slider {
    @include full-rounding;
    @include element_decel;
    min-width: 0.3rem;
    min-height: 2.05rem;
    background-color: transparentize($onSurfaceVariant, 0.65);
    transition: all 0.2s ease;
  }

  slider:hover,
  slider:focus {
    background-color: transparentize($onSurfaceVariant, 0.5);
    min-width: 0.4rem;
  }

  slider:active {
    background-color: transparentize($onSurface, 0.4);
    min-width: 0.5rem;
  }
}

// Enhanced calendar styling
.sidebar-calendar-btn-arrow {
  @include full-rounding;
  background-color: $layer2;
  min-width: 1.7rem;
  min-height: 1.7rem;
  transition: all 0.15s ease;

  &:hover,
  &:focus {
    background-color: $layer2Hover;
    transform: scale(1.05);
  }

  &:active {
    background-color: $layer2Active;
    transform: scale(0.95);
  }
}

.sidebar-calendar-btn {
  @include full-rounding;
  @include element_decel;
  min-height: 2.52rem;
  min-width: 2.52rem;
  color: $onSurface;
  transition: all 0.15s ease;
}

.sidebar-calendar-btn:hover,
.sidebar-calendar-btn:focus {
  background-color: $hovercolor;
}

.sidebar-calendar-btn:active {
  background-color: $activecolor;
}

.sidebar-calendar-btn-txt {
  margin-left: -10.34rem;
  margin-right: -10.34rem;
}

.sidebar-calendar-btn-today {
  background-color: $primary;
  color: $onPrimary;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.sidebar-calendar-btn-today:hover,
.sidebar-calendar-btn-today:focus {
  background-color: mix($primary, $hovercolor, 75%);
}

.sidebar-calendar-btn-today:active {
  background-color: mix($primary, $hovercolor, 45%);
}

.sidebar-calendar-btn-othermonth {
  color: $outline;
  opacity: 0.8;
}

.sidebar-calendar-header {
  margin: 0.35rem;
}

.sidebar-calendar-monthyear-btn {
  @include full-rounding;
  @include element_decel;
  padding: 0 0.7rem;
  background-color: $layer2;
  color: $onSurface;
  transition: all 0.15s ease;
}

.sidebar-calendar-monthyear-btn:hover,
.sidebar-calendar-monthyear-btn:focus {
  background-color: $hovercolor;
}

.sidebar-calendar-monthyear-btn:active {
  background-color: $activecolor;
}

.sidebar-calendar-monthshift-btn {
  @include full-rounding;
  @include element_decel;
  min-width: 2.05rem;
  min-height: 2.05rem;
  background-color: $layer2;
  color: $outline;
  transition: all 0.15s ease;
}

.sidebar-calendar-monthshift-btn:hover {
  background-color: $hovercolor;
  transform: scale(1.05);
}

.sidebar-calendar-monthshift-btn:active {
  background-color: $activecolor;
  transform: scale(0.95);
}

.sidebar-calendar-collapsed-pill {
  @include full-rounding;
  background-color: $layer2;
  min-width: 1.7rem;
  min-height: 1.7rem;
  padding-left: 0.35rem;
  padding-right: 0.35rem;
  transition: all 0.15s ease;

  &:hover,
  &:focus {
    background-color: $layer2Hover;
  }

  &:active {
    background-color: $layer2Active;
  }
}

// Enhanced to-do items
.sidebar-todo-item {
  @include small-rounding;
  margin-right: 0.55rem;
  background-color: $layer2;
  color: $onLayer2;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  transition: all 0.15s ease;
}

.sidebar-todo-txt {
  margin: 0.7rem;
  margin-bottom: 0;
}

.sidebar-todo-actions {
  margin: 0.35rem;
  margin-top: 0;
  margin-right: 0;
}

.sidebar-todo-item-action {
  @include element_decel;
  border-radius: 9999px;
  min-width: 1.7rem;
  min-height: 1.7rem;
  transition: all 0.15s ease;
}

.sidebar-todo-item-action:hover,
.sidebar-todo-item-action:focus {
  background-color: $layer2Hover;
  transform: scale(1.05);
}

.sidebar-todo-item-action:active {
  background-color: $layer2Active;
  transform: scale(0.95);
}

.sidebar-todo-crosser {
  transition: margin 200ms cubic-bezier(0.1, 0.9, 0.2, 1), background-color 0ms;
  min-width: 0;
}

.sidebar-todo-crosser-crossed {
  background-color: $onBackground;
}

.sidebar-todo-crosser-removed {
  background-color: $error;
}

.sidebar-todo-new {
  @include full-rounding;
  @include element_decel;
  background-color: $layer2;
  color: $onLayer2;
  margin: 0.35rem;
  padding: 0.21rem 0.55rem;
  transition: all 0.15s ease;
}

.sidebar-todo-new,
.sidebar-todo-new:focus {
  color: $onSecondaryContainer;
  background-color: $secondaryContainer;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.sidebar-todo-new:active {
  color: $onPrimaryContainer;
  background-color: $primaryContainer;
  transform: scale(0.98);
}

.sidebar-todo-add {
  @include element_decel;
  @include small-rounding;
  min-width: 1.7rem;
  min-height: 1.7rem;
  color: $onSecondaryContainer;
  border: 1px solid $onSurface;
  transition: all 0.15s ease;
}

.sidebar-todo-add:hover,
.sidebar-todo-add:focus {
  background-color: $surfaceContainerHigh;
  transform: scale(1.05);
}

.sidebar-todo-add:active {
  background-color: $surfaceContainerHighest;
  transform: scale(0.95);
}

.sidebar-todo-add-available {
  @include element_decel;
  @include small-rounding;
  min-width: 1.7rem;
  min-height: 1.7rem;
  background-color: $primary;
  color: $onPrimary;
  border: 1px solid $primary;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  transition: all 0.15s ease;
}

.sidebar-todo-add-available:hover,
.sidebar-todo-add-available:focus {
  background-color: mix($primary, $hovercolor, 75%);
  transform: scale(1.05);
}

.sidebar-todo-add-available:active {
  background-color: mix($primary, $hovercolor, 45%);
  transform: scale(0.95);
}

.sidebar-todo-entry {
  @include element_decel;
  @include small-rounding;
  background-color: $surfaceVariant;
  color: $onSurfaceVariant;
  caret-color: $onSurfaceVariant;
  margin: 0 0.35rem;
  min-height: 1.8rem;
  min-width: 0;
  padding: 0.21rem 0.7rem;
  border: 1px solid $outline;
  transition: all 0.15s ease;
}

.sidebar-todo-entry:focus {
  border: 1px solid $onSurfaceVariant;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

// Improved module styling
.sidebar-module {
  @include normal-rounding;
  @include group-padding;
  background-color: $layer1;
  padding: 0.7rem;
  margin-bottom: 0.7rem;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08);
}

.sidebar-module-btn-arrow {
  @include full-rounding;
  @include icon-material;
  min-width: 1.7rem;
  min-height: 1.7rem;
  background-color: $layer2;
  transition: all 0.15s ease;

  &:hover,
  &:focus {
    background-color: $layer2Hover;
    transform: scale(1.05);
  }

  &:active {
    background-color: $layer2Active;
    transform: scale(0.95);
  }
}

.sidebar-module-scripts-button {
  @include full-rounding;
  @include icon-material;
  background-color: $layer1;
  min-width: 1.7rem;
  min-height: 1.7rem;
  transition: all 0.15s ease;

  &:hover,
  &:focus {
    background-color: $layer1Hover;
    transform: scale(1.05);
  }

  &:active {
    background-color: $layer1Active;
    transform: scale(0.95);
  }
}

// Color picker enhancements
$colorpicker_rounding: 0.35rem;

.sidebar-module-colorpicker-wrapper {
  padding: 0.35rem;
}

.sidebar-module-colorpicker-cursorwrapper {
  padding: 0.35rem 0.14rem;
}

.sidebar-module-colorpicker-hue {
  min-height: 13.64rem;
  min-width: 1.1rem;
  border-radius: $colorpicker_rounding;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.sidebar-module-colorpicker-hue-cursor {
  background-color: $onBackground;
  border: 0.14rem solid $onBackground;
  min-height: 0.14rem;
  margin-top: -0.14rem;
  border-radius: $colorpicker_rounding;
}

.sidebar-module-colorpicker-saturationandlightness-wrapper {
  padding: 0.35rem;
}

.sidebar-module-colorpicker-saturationandlightness {
  min-height: 13.64rem;
  min-width: 13.64rem;
  border-radius: $colorpicker_rounding;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.sidebar-module-colorpicker-saturationandlightness-cursorwrapper {
  padding: 0.35rem;
  margin-top: -0.41rem;
  margin-left: -0.41rem;
}

.sidebar-module-colorpicker-saturationandlightness-cursor {
  @include full-rounding;
  border: 0.14rem solid white;
  min-width: 0.7rem;
  min-height: 0.7rem;
  margin-top: -0.41rem;
  margin-left: -0.41rem;
  box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
}
